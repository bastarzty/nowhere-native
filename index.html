<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nowhere Native | Cultural Identity in Limbo</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Serif:ital,wght@0,400;0,700;1,400&family=Space+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #1a1f35;
            --accent-color: #64b5f6;
            --bg-color: #0a0e1a;
            --text-color: #e0e0e0;
            --card-bg: rgba(255, 255, 255, 0.08);
            --card-border: rgba(255, 255, 255, 0.1);
        }
        
        body {
            font-family: 'Noto Serif', 'Noto Serif SC', serif;
            background-color: var(--bg-color);
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(20, 40, 80, 0.2) 0%, transparent 200px),
                radial-gradient(circle at 70% 60%, rgba(40, 60, 120, 0.2) 0%, transparent 200px);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            overflow-x: hidden;
            perspective: 1000px;
        }
        
        /* æ˜Ÿæ˜ŸèƒŒæ™¯ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            opacity: 0;
            animation: twinkle var(--duration) infinite ease-in-out;
            animation-delay: var(--delay);
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: var(--brightness); transform: scale(1); }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 1;
        }
        
        header {
            text-align: center;
            padding: 2rem 0;
            margin-bottom: 3rem;
            position: relative;
        }
        
        header h1 {
            font-size: 3rem;
            margin: 0;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(100, 181, 246, 0.5);
            color: white;
        }
        
        .subtitle {
            font-style: italic;
            font-size: 1.2rem;
            margin-top: 0.5rem;
            opacity: 0.8;
        }
        
        .memory-box-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(100, 181, 246, 0.2);
            color: white;
            border: 1px solid rgba(100, 181, 246, 0.4);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .memory-box-btn:hover {
            background-color: rgba(100, 181, 246, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }
        
        @media (max-width: 768px) {
            .memory-box-btn {
                top: 10px;
                right: 10px;
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
        }
        
        .input-form {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .input-form h2 {
            text-align: center;
            margin-top: 0;
            color: var(--accent-color);
            letter-spacing: 1px;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.9);
        }
        
        input[type="text"], select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            background-color: rgba(255, 255, 255, 0.05);
            color: white;
            font-family: inherit;
        }
        
        .input-pair {
            display: flex;
            gap: 1rem;
        }
        
        .input-pair input {
            flex: 1;
        }
        
        .checkbox-group, .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 0.5rem;
        }
        
        .checkbox-group label, .radio-group label {
            display: flex;
            align-items: center;
            font-weight: normal;
            margin-bottom: 0;
            cursor: pointer;
        }
        
        input[type="checkbox"], input[type="radio"] {
            margin-right: 0.5rem;
        }
        
        button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s;
            font-family: inherit;
        }
        
        button:hover {
            background-color: #5095db;
        }
        
        .secondary-btn {
            background-color: rgba(100, 181, 246, 0.3);
            color: white;
            border: 1px solid rgba(100, 181, 246, 0.5);
            margin-top: 0.5rem;
            font-size: 0.9rem;
            padding: 0.6rem 1rem;
            width: auto;
        }
        
        .secondary-btn:hover {
            background-color: rgba(100, 181, 246, 0.5);
        }
        
        form button {
            display: block;
            margin: 2rem auto 0;
            width: 200px;
        }
        
        /* è¡¨å•åˆ†é¡µæ ·å¼ */
        .form-navigation {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
        }
        
        .page-indicator {
            display: flex;
            gap: 8px;
        }
        
        .page {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }
        
        .page.active {
            background-color: var(--accent-color);
            color: white;
        }
        
        .form-page {
            display: none;
        }
        
        .form-page.active {
            display: block;
        }
        
        .form-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }
        
        .next-btn, .prev-btn {
            background-color: rgba(100, 181, 246, 0.3);
            color: white;
            border: 1px solid rgba(100, 181, 246, 0.5);
        }
        
        .next-btn:hover, .prev-btn:hover {
            background-color: rgba(100, 181, 246, 0.5);
        }
        
        .field-description {
            font-size: 0.9rem;
            margin: 0.3rem 0;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .field-example {
            font-size: 0.8rem;
            margin: 0.2rem 0 0.5rem;
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
        }
        
        textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            background-color: rgba(255, 255, 255, 0.05);
            color: white;
            font-family: inherit;
            min-height: 100px;
            resize: vertical;
        }
        
        .monologue-container {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 2rem;
            display: none;
            flex-direction: column;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .output-text {
            font-size: 1.1rem;
            line-height: 1.8;
            white-space: pre-line;
            margin-bottom: 2rem;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .hidden {
            display: none;
        }
        
        footer {
            text-align: center;
            margin-top: 3rem;
            padding: 1rem;
            color: rgba(255, 255, 255, 0.6);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .input-pair {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .checkbox-group, .radio-group {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    <div class="container">
        <header>
            <a href="memories.html" class="memory-box-btn" title="View Memory Box">ğŸ“¦</a>
            <h1>Nowhere Native</h1>
            <p class="subtitle">A generative experience for the culturally displaced.</p>
        </header>

        <section class="input-form">
            <h2>Create Your Cultural Identity Monologue</h2>
            <div class="form-navigation">
                <div class="page-indicator">
                    <span class="page active" data-page="1">1</span>
                    <span class="page" data-page="2">2</span>
                </div>
            </div>
            
            <form id="identity-form">
                <!-- Page 1 -->
                <div class="form-page active" id="form-page-1">
                    <div class="form-group">
                        <label for="name">Your Names (In Different Languages)</label>
                        <div class="input-pair">
                            <input type="text" id="name-local" placeholder="Name in your native language" required>
                            <input type="text" id="name-foreign" placeholder="Your adopted name" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Languages You Speak (Select all that apply)</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="language" value="chinese"> Chinese</label>
                            <label><input type="checkbox" name="language" value="english"> English</label>
                            <label><input type="checkbox" name="language" value="korean"> Korean</label>
                            <label><input type="checkbox" name="language" value="japanese"> Japanese</label>
                            <label><input type="checkbox" name="language" value="french"> French</label>
                            <label><input type="checkbox" name="language" value="spanish"> Spanish</label>
                            <label><input type="checkbox" name="language" value="arabic"> Arabic</label>
                            <label><input type="checkbox" name="language" value="hindi"> Hindi</label>
                            <label><input type="checkbox" name="language" value="other"> Other</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="native-language">Your Primary Language</label>
                        <select id="native-language" required>
                            <option value="">-- Select Primary Language --</option>
                            <option value="chinese">Chinese</option>
                            <option value="english">English</option>
                            <option value="korean">Korean</option>
                            <option value="japanese">Japanese</option>
                            <option value="french">French</option>
                            <option value="spanish">Spanish</option>
                            <option value="arabic">Arabic</option>
                            <option value="hindi">Hindi</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Cultural Background (Select all that apply)</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="cultural-bg" value="east-asia"> East Asian</label>
                            <label><input type="checkbox" name="cultural-bg" value="western"> Western</label>
                            <label><input type="checkbox" name="cultural-bg" value="southeast-asia"> Southeast Asian</label>
                            <label><input type="checkbox" name="cultural-bg" value="south-asia"> South Asian</label>
                            <label><input type="checkbox" name="cultural-bg" value="middle-east"> Middle Eastern</label>
                            <label><input type="checkbox" name="cultural-bg" value="africa"> African</label>
                            <label><input type="checkbox" name="cultural-bg" value="latin-america"> Latin American</label>
                        </div>
                    </div>
                    
                    <button type="button" id="next-page-btn" class="next-btn">Next Page</button>
                </div>
                
                <!-- Page 2 -->
                <div class="form-page" id="form-page-2">
                    <div class="form-group">
                        <label for="food">Flavors of Home</label>
                        <p class="field-description">Describe a meal, dish, or flavor that strongly connects you to home or childhood memory.</p>
                        <p class="field-example">Example: "My mother's homemade kimchi stew."</p>
                        <input type="text" id="food" placeholder="Share a taste of home..." required>
                    </div>
                    
                    <div class="form-group">
                        <label for="soundtrack">Soundtrack of You</label>
                        <p class="field-description">Share a song, sound, or type of music that deeply resonates with your identity or sense of belonging.</p>
                        <input type="text" id="soundtrack" placeholder="Share a song that represents you...">
                    </div>
                    
                    <div class="form-group">
                        <label for="home-place">Place You Call Home</label>
                        <p class="field-description">Describe a specific place or multiple places where you feel deeply connected or feel a strong sense of belonging.</p>
                        <p class="field-example">Example: "The balcony of my childhood apartment in Seoul."</p>
                        <input type="text" id="home-place" placeholder="Describe a place you call home...">
                    </div>
                    
                    <div class="form-group">
                        <label for="object">An Object of Significance</label>
                        <p class="field-description">Share an object or personal item that symbolizes your identity or journey.</p>
                        <p class="field-example">Example: "My worn-out passport filled with stamps."</p>
                        <input type="text" id="object" placeholder="Describe an object meaningful to you...">
                    </div>
                    
                    <div class="form-group">
                        <label for="aspiration">Dreams and Aspirations</label>
                        <p class="field-description">Briefly describe a dream, goal, or aspiration shaped by your cultural background or personal journey.</p>
                        <p class="field-example">Example: "To open a cafÃ© that blends flavors from both my cultures."</p>
                        <input type="text" id="aspiration" placeholder="Share your dream...">
                    </div>
                    
                    <div class="form-group">
                        <label for="belonging">Experiences of Belonging or Alienation</label>
                        <p class="field-description">Optional: Share a brief memory or experience of feeling deeply connected or profoundly disconnected from your cultural identity.</p>
                        <textarea id="belonging" placeholder="Share your experience..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>How Do You Feel About Your Cultural Identity?</label>
                        <div class="radio-group">
                            <label><input type="radio" name="feeling" value="lost" checked> Lost</label>
                            <label><input type="radio" name="feeling" value="proud"> Proud</label>
                            <label><input type="radio" name="feeling" value="conflicted"> Conflicted</label>
                            <label><input type="radio" name="feeling" value="nostalgic"> Nostalgic</label>
                            <label><input type="radio" name="feeling" value="alienated"> Alienated</label>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" id="prev-page-btn" class="prev-btn">Previous Page</button>
                        <button type="submit">Generate Monologue</button>
                    </div>
                </div>
            </form>
        </section>

        <section class="monologue-container" id="monologue-output">
            <div class="output-text"></div>
            <div class="actions hidden">
                <button id="regenerate-btn">Regenerate</button>
                <div id="language-selector-container">
                    <span class="language-label">Language | Language:</span>
                </div>
                <button id="save-btn">Save as Image</button>
                <button id="upload-btn">Upload to Collection</button>
            </div>
        </section>

        <footer>
            <p>Nowhere Native - Exploring Identity Displacement</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // åˆ›å»ºæ˜Ÿæ˜ŸèƒŒæ™¯
            const starsContainer = document.getElementById('stars');
            const starCount = 200;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                
                // éšæœºå¤§å°å’Œä½ç½®
                const size = Math.random() * 2 + 1;
                const left = Math.random() * 100;
                const top = Math.random() * 100;
                
                // éšæœºåŠ¨ç”»å‚æ•°
                const duration = Math.random() * 5 + 3;
                const delay = Math.random() * 5;
                const brightness = Math.random() * 0.7 + 0.3;
                
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${left}%`;
                star.style.top = `${top}%`;
                star.style.setProperty('--duration', `${duration}s`);
                star.style.setProperty('--delay', `${delay}s`);
                star.style.setProperty('--brightness', brightness);
                
                starsContainer.appendChild(star);
            }
            
            // è¡¨å•åˆ†é¡µæ§åˆ¶
            const nextPageBtn = document.getElementById('next-page-btn');
            const prevPageBtn = document.getElementById('prev-page-btn');
            const page1 = document.getElementById('form-page-1');
            const page2 = document.getElementById('form-page-2');
            const pageIndicators = document.querySelectorAll('.page');
            
            // åˆ‡æ¢åˆ°ä¸‹ä¸€é¡µ
            nextPageBtn.addEventListener('click', function() {
                // æ£€æŸ¥ç¬¬ä¸€é¡µçš„å¿…å¡«å­—æ®µ
                const nameLocal = document.getElementById('name-local').value;
                const nameForeign = document.getElementById('name-foreign').value;
                const nativeLanguage = document.getElementById('native-language').value;
                
                if (!nameLocal || !nameForeign || !nativeLanguage) {
                    alert('Please fill in all required fields before continuing');
                    return;
                }
                
                page1.classList.remove('active');
                page2.classList.add('active');
                pageIndicators[0].classList.remove('active');
                pageIndicators[1].classList.add('active');
            });
            
            // åˆ‡æ¢åˆ°ä¸Šä¸€é¡µ
            prevPageBtn.addEventListener('click', function() {
                page2.classList.remove('active');
                page1.classList.add('active');
                pageIndicators[1].classList.remove('active');
                pageIndicators[0].classList.add('active');
            });
            
            // ç‚¹å‡»é¡µé¢æŒ‡ç¤ºå™¨
            pageIndicators.forEach(indicator => {
                indicator.addEventListener('click', function() {
                    const targetPage = this.getAttribute('data-page');
                    
                    if (targetPage === '1') {
                        page2.classList.remove('active');
                        page1.classList.add('active');
                        pageIndicators[1].classList.remove('active');
                        pageIndicators[0].classList.add('active');
                    } else if (targetPage === '2') {
                        // æ£€æŸ¥ç¬¬ä¸€é¡µçš„å¿…å¡«å­—æ®µ
                        const nameLocal = document.getElementById('name-local').value;
                        const nameForeign = document.getElementById('name-foreign').value;
                        const nativeLanguage = document.getElementById('native-language').value;
                        
                        if (!nameLocal || !nameForeign || !nativeLanguage) {
                            alert('Please fill in all required fields before continuing');
                            return;
                        }
                        
                        page1.classList.remove('active');
                        page2.classList.add('active');
                        pageIndicators[0].classList.remove('active');
                        pageIndicators[1].classList.add('active');
                    }
                });
            });
            
            // ç®€å•æµ‹è¯•æ–‡æœ¬æ˜¾ç¤º
            const form = document.getElementById('identity-form');
            const outputContainer = document.getElementById('monologue-output');
            const outputText = outputContainer.querySelector('.output-text');
            let currentText = '';
            let currentMonologue = {}; // å­˜å‚¨å½“å‰ç‹¬ç™½çš„æ•°æ®
            
            // è‹±æ–‡å¥å­æ¨¡æ¿
            const sentenceTemplates = {
                // åå­—ç›¸å…³
                names: [
                    "They call me \"{nameForeign}\" at school, but my heart answers to \"{nameLocal}\".",
                    "My official identity card says \"{nameForeign}\", but my grandmother still calls me \"{nameLocal}\".",
                    "Some days I introduce myself as \"{nameForeign}\", other days I'm \"{nameLocal}\".",
                    "I've practiced writing \"{nameForeign}\" so many times I sometimes forget how to write \"{nameLocal}\".",
                    "I'm \"{nameForeign}\" in their world, and \"{nameLocal}\" in mine."
                ],
                
                // é£Ÿç‰©ç›¸å…³
                food: [
                    "I've forgotten how to write my name in my mother tongue, but I remember the taste of {food} every weekend.",
                    "The smell of {food} brings me back to a place I barely remember.",
                    "I dream about {food} â€“ a taste of home I can't fully describe to my new friends.",
                    "My mother's {food} recipe will never taste the same when I make it myself.",
                    "I found myself crying while eating {food} in a foreign restaurant, surprised by my own reaction."
                ],
                
                // èº«ä»½æ„Ÿç›¸å…³
                identity: [
                    "I belong to a city that never truly knew me, and to a family that forgot how to explain who I've become.",
                    "My accent changes depending on who I'm talking to â€“ a chameleon adapting to survive.",
                    "Home is a concept I've redefined too many times to count.",
                    "I study my cultural traditions like an anthropologist, trying to understand my own heritage.",
                    "The more languages I learn, the more versions of myself I discover."
                ],
                
                // è¯­è¨€ç›¸å…³
                language: [
                    "Some nights I dream in English, and cry in my native language.",
                    "I translate my thoughts before speaking, a secret process nobody sees.",
                    "There are feelings I can only express in my mother tongue.",
                    "I still count and pray in my first language, no matter how long I've been away.",
                    "I speak different languages with different parts of my soul."
                ],
                
                // æ¼‚æµ®æ„Ÿç›¸å…³
                floating: [
                    "I'm like an island drifting between two worlds.",
                    "I exist in the spaces between cultures, never fully belonging anywhere.",
                    "My identity is a constantly shifting mosaic of places I've been.",
                    "I navigate between worlds like a ghost â€“ present but never completely visible.",
                    "I've built my home in the hyphen between cultural identities."
                ],
                
                // ç»“å°¾é—®é¢˜
                ending: [
                    "Who am I?\nYou tell me.",
                    "Where do I belong?\nPerhaps nowhere and everywhere.",
                    "What does it mean to have roots?\nI'm still learning.",
                    "Am I from here or there?\nThe answer changes with the moon.",
                    "When will I feel at home?\nMaybe when I stop asking this question."
                ],
                
                // å®¶çš„åœ°æ–¹
                place: [
                    "I remember {place} - not as a location, but as a feeling I carry with me.",
                    "Sometimes I close my eyes and imagine myself back at {place}, where everything made sense.",
                    "{place} exists now only in my memory, a place I can visit but never stay.",
                    "The distance between me and {place} grows wider with each passing year.",
                    "I've recreated little corners of {place} wherever I've lived."
                ],
                
                // é‡è¦ç‰©å“
                object: [
                    "My {object} has traveled with me across borders, a silent witness to my transformation.",
                    "I keep my {object} close, a tangible reminder of who I used to be.",
                    "The {object} connects me to a past that sometimes feels like someone else's life.",
                    "I touch my {object} when I need to remember where I came from.",
                    "My {object} holds stories I cannot fully translate."
                ],
                
                // éŸ³ä¹
                soundtrack: [
                    "The melody of {soundtrack} follows me like a shadow, connecting fragments of my scattered self.",
                    "I play {soundtrack} when homesickness becomes unbearable.",
                    "In the notes of {soundtrack}, I find echoes of a self I left behind.",
                    "{soundtrack} bridges the gap between my past and present.",
                    "The rhythm of {soundtrack} beats in sync with a heart caught between worlds."
                ],
                
                // æ¢¦æƒ³
                dreams: [
                    "My dream to {dream} is rooted in the collision of my divided identities.",
                    "I wonder if achieving {dream} will finally make me feel whole.",
                    "The path to {dream} is complicated by the expectations of multiple cultures.",
                    "My ancestors would not understand my desire to {dream}, and that's both liberating and terrifying.",
                    "I pursue {dream} as a way to reconcile the different worlds inside me."
                ],
                
                // GPTç”Ÿæˆçš„å¥å­
                languageDisplacement: [
                    "I forgot how to write my name in my first language. But I remember how it feels when someone mispronounces it.",
                    "My accent has a timezone.",
                    "When I think in Mandarin, I'm loud. In English, I'm careful. In either, I am not quite me.",
                    "My dreams still speak a language I no longer use when I'm awake.",
                    "My tongue stutters when switching sides."
                ],
                
                systemicResistance: [
                    "My identity is in beta. Updated daily. Subject to change.",
                    "Every form I fill out asks for my legal name. But I never know which one to give.",
                    "I never chose my English name. It was picked to help me 'blend in'.",
                    "The visa line taught me which passport matters."
                ],
                
                familialTerms: [
                    "There's no word in English for what my grandmother called me.",
                    "I was called Hana at school, but é˜¿å¨œ by my auntie. I don't remember which one I cried in.",
                    "I have three names, and each one belongs to a different version of me.",
                    "My parents call me one thing, my friends another. I answer to both."
                ],
                
                rootlessness: [
                    "When I stop translating, I stop existing.",
                    "Home smelled like garlic and sesame oil. But here, it smells like laundry detergent and cold air.",
                    "I'm from too many places to belong in just one.",
                    "I'm homesick for a place I'm not sure existed."
                ],
                
                digitalExistence: [
                    "My mother tongue corrects itself in red squiggly lines.",
                    "My name autocorrects into something easier for you.",
                    "In every database, I am a misspelling."
                ]
            };
            
            // ä¸­æ–‡ç‰ˆå¥å­æ¨¡æ¿
            const chineseSentenceTemplates = {
                names: [
                    "åœ¨å­¦æ ¡ä»–ä»¬å«æˆ‘\"{nameForeign}\"ï¼Œä½†æˆ‘çš„å¿ƒå›åº”çš„æ˜¯\"{nameLocal}\"ã€‚",
                    "æˆ‘çš„èº«ä»½è¯ä¸Šå†™ç€\"{nameForeign}\"ï¼Œä½†æˆ‘çš„ç¥–æ¯ä»ç„¶å«æˆ‘\"{nameLocal}\"ã€‚",
                    "æœ‰äº›æ—¥å­æˆ‘ä»‹ç»è‡ªå·±ä¸º\"{nameForeign}\"ï¼Œå…¶ä»–æ—¥å­æˆ‘æ˜¯\"{nameLocal}\"ã€‚",
                    "æˆ‘å·²ç»ç»ƒä¹ å†™\"{nameForeign}\"å¤ªå¤šæ¬¡ï¼Œæœ‰æ—¶å€™æˆ‘å¿˜è®°æ€ä¹ˆå†™\"{nameLocal}\"ã€‚",
                    "åœ¨ä»–ä»¬çš„ä¸–ç•Œé‡Œæˆ‘æ˜¯\"{nameForeign}\"ï¼Œåœ¨æˆ‘çš„ä¸–ç•Œé‡Œæˆ‘æ˜¯\"{nameLocal}\"ã€‚"
                ],
                
                food: [
                    "æˆ‘å·²ç»å¿˜è®°å¦‚ä½•ç”¨æ¯è¯­ä¹¦å†™æˆ‘çš„åå­—ï¼Œä½†æˆ‘è®°å¾—æ¯ä¸ªå‘¨æœ«{food}çš„å‘³é“ã€‚",
                    "{food}çš„é¦™å‘³æŠŠæˆ‘å¸¦å›åˆ°ä¸€ä¸ªæˆ‘å‡ ä¹ä¸è®°å¾—çš„åœ°æ–¹ã€‚",
                    "æˆ‘æ¢¦è§{food}â€”â€”ä¸€ç§æˆ‘æ— æ³•å®Œå…¨å‘æ–°æœ‹å‹æè¿°çš„å®¶ä¹¡å‘³é“ã€‚",
                    "æˆ‘æ¯äº²çš„{food}é£Ÿè°±ï¼Œå½“æˆ‘è‡ªå·±åšæ—¶æ°¸è¿œä¸ä¼šæœ‰åŒæ ·çš„å‘³é“ã€‚",
                    "æˆ‘å‘ç°è‡ªå·±åœ¨å¼‚å›½é¤å…åƒ{food}æ—¶æµæ³ªï¼Œå¯¹è‡ªå·±çš„ååº”æ„Ÿåˆ°æƒŠè®¶ã€‚"
                ],
                
                identity: [
                    "æˆ‘å±äºä¸€ä¸ªä»æœªçœŸæ­£äº†è§£æˆ‘çš„åŸå¸‚ï¼Œå’Œä¸€ä¸ªå¿˜è®°å¦‚ä½•è§£é‡Šæˆ‘å˜æˆä»€ä¹ˆæ ·çš„å®¶åº­ã€‚",
                    "æˆ‘çš„å£éŸ³éšç€äº¤è°ˆå¯¹è±¡è€Œå˜åŒ–â€”â€”ä¸€åªä¸ºäº†ç”Ÿå­˜è€Œé€‚åº”çš„å˜è‰²é¾™ã€‚",
                    "å®¶æ˜¯ä¸€ä¸ªæˆ‘å·²ç»é‡æ–°å®šä¹‰å¤ªå¤šæ¬¡çš„æ¦‚å¿µã€‚",
                    "æˆ‘åƒäººç±»å­¦å®¶ä¸€æ ·ç ”ç©¶è‡ªå·±çš„æ–‡åŒ–ä¼ ç»Ÿï¼Œè¯•å›¾ç†è§£è‡ªå·±çš„é—äº§ã€‚",
                    "æˆ‘å­¦ä¹ çš„è¯­è¨€è¶Šå¤šï¼Œæˆ‘å‘ç°è‡ªå·±çš„ç‰ˆæœ¬å°±è¶Šå¤šã€‚"
                ],
                
                language: [
                    "æœ‰äº›å¤œæ™šæˆ‘ç”¨è‹±è¯­åšæ¢¦ï¼Œç”¨æˆ‘çš„æ¯è¯­å“­æ³£ã€‚",
                    "è¯´è¯å‰æˆ‘ä¼šç¿»è¯‘è‡ªå·±çš„æƒ³æ³•ï¼Œä¸€ä¸ªæ²¡äººçœ‹è§çš„ç§˜å¯†è¿‡ç¨‹ã€‚",
                    "æœ‰äº›æ„Ÿå—æˆ‘åªèƒ½ç”¨æ¯è¯­è¡¨è¾¾ã€‚",
                    "æ— è®ºç¦»å¼€å¤šä¹…ï¼Œæˆ‘ä»ç”¨ç¬¬ä¸€è¯­è¨€è®¡æ•°å’Œç¥ˆç¥·ã€‚",
                    "æˆ‘ç”¨çµé­‚çš„ä¸åŒéƒ¨åˆ†è¯´ä¸åŒçš„è¯­è¨€ã€‚"
                ],
                
                floating: [
                    "æˆ‘åƒä¸€åº§æ¼‚æµåœ¨ä¸¤ä¸ªä¸–ç•Œä¹‹é—´çš„å­¤å²›ã€‚",
                    "æˆ‘å­˜åœ¨äºæ–‡åŒ–ä¹‹é—´çš„ç©ºé—´ä¸­ï¼Œä»æœªå®Œå…¨å±äºä»»ä½•åœ°æ–¹ã€‚",
                    "æˆ‘çš„èº«ä»½æ˜¯æˆ‘å»è¿‡çš„åœ°æ–¹ä¸æ–­å˜åŒ–çš„é©¬èµ›å…‹ã€‚",
                    "æˆ‘åƒå¹½çµä¸€æ ·åœ¨ä¸–ç•Œä¹‹é—´å¯¼èˆªâ€”â€”å­˜åœ¨ä½†æ°¸è¿œä¸å®Œå…¨å¯è§ã€‚",
                    "æˆ‘åœ¨æ–‡åŒ–èº«ä»½ä¹‹é—´çš„è¿å­—ç¬¦ä¸­å»ºç«‹äº†è‡ªå·±çš„å®¶ã€‚"
                ],
                
                ending: [
                    "æˆ‘æ˜¯è°ï¼Ÿ\nä½ å‘Šè¯‰æˆ‘ã€‚",
                    "æˆ‘å±äºå“ªé‡Œï¼Ÿ\næˆ–è®¸æ— å¤„äº¦å¤„å¤„ã€‚",
                    "æ‹¥æœ‰æ ¹åŸºæ„å‘³ç€ä»€ä¹ˆï¼Ÿ\næˆ‘ä»åœ¨å­¦ä¹ ã€‚",
                    "æˆ‘æ˜¯æ¥è‡ªè¿™é‡Œè¿˜æ˜¯é‚£é‡Œï¼Ÿ\nç­”æ¡ˆéšç€æœˆäº®å˜åŒ–ã€‚",
                    "æˆ‘ä½•æ—¶æ‰èƒ½æœ‰å®¶çš„æ„Ÿè§‰ï¼Ÿ\nä¹Ÿè®¸æ˜¯å½“æˆ‘åœæ­¢é—®è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ã€‚"
                ],
                
                place: [
                    "æˆ‘è®°å¾—{place} - ä¸æ˜¯ä½œä¸ºä¸€ä¸ªåœ°ç‚¹ï¼Œè€Œæ˜¯ä½œä¸ºæˆ‘éšèº«æºå¸¦çš„ä¸€ç§æ„Ÿè§‰ã€‚",
                    "æœ‰æ—¶æˆ‘é—­ä¸Šçœ¼ç›æƒ³è±¡è‡ªå·±å›åˆ°{place}ï¼Œé‚£é‡Œä¸€åˆ‡éƒ½æœ‰æ„ä¹‰ã€‚",
                    "{place}ç°åœ¨åªå­˜åœ¨äºæˆ‘çš„è®°å¿†ä¸­ï¼Œä¸€ä¸ªæˆ‘å¯ä»¥å‚è§‚ä½†æ°¸è¿œä¸èƒ½åœç•™çš„åœ°æ–¹ã€‚",
                    "æˆ‘ä¸{place}ä¹‹é—´çš„è·ç¦»éšç€å²æœˆæµé€è€Œå˜å¾—è¶Šæ¥è¶Šå®½ã€‚",
                    "æˆ‘åœ¨æˆ‘ç”Ÿæ´»è¿‡çš„æ¯ä¸ªåœ°æ–¹éƒ½é‡æ–°åˆ›é€ äº†{place}çš„ä¸€äº›è§’è½ã€‚"
                ],
                
                object: [
                    "æˆ‘çš„{object}è·¨è¶Šè¾¹å¢ƒä¸æˆ‘åŒè¡Œï¼Œé»˜é»˜è§è¯äº†æˆ‘çš„è½¬å˜ã€‚",
                    "æˆ‘æŠŠ{object}æ”¾åœ¨èº«è¾¹ï¼Œæ˜¯æˆ‘æ›¾ç»çš„è‡ªå·±çš„æœ‰å½¢æé†’ã€‚",
                    "{object}å°†æˆ‘è¿æ¥åˆ°ä¸€ä¸ªæœ‰æ—¶æ„Ÿè§‰åƒåˆ«äººç”Ÿæ´»çš„è¿‡å»ã€‚",
                    "å½“æˆ‘éœ€è¦è®°ä½æˆ‘æ¥è‡ªå“ªé‡Œæ—¶ï¼Œæˆ‘ä¼šè§¦æ‘¸æˆ‘çš„{object}ã€‚",
                    "æˆ‘çš„{object}æ‰¿è½½ç€æˆ‘æ— æ³•å®Œå…¨ç¿»è¯‘çš„æ•…äº‹ã€‚"
                ],
                
                soundtrack: [
                    "{soundtrack}çš„æ—‹å¾‹åƒå½±å­ä¸€æ ·è·Ÿéšç€æˆ‘ï¼Œè¿æ¥ç€æˆ‘åˆ†æ•£çš„è‡ªæˆ‘ç¢ç‰‡ã€‚",
                    "å½“æ€ä¹¡ä¹‹æƒ…å˜å¾—éš¾ä»¥å¿å—æ—¶ï¼Œæˆ‘ä¼šæ’­æ”¾{soundtrack}ã€‚",
                    "åœ¨{soundtrack}çš„éŸ³ç¬¦ä¸­ï¼Œæˆ‘å‘ç°äº†æˆ‘ç•™ä¸‹çš„è‡ªæˆ‘çš„å›å£°ã€‚",
                    "{soundtrack}å¼¥åˆäº†æˆ‘è¿‡å»å’Œç°åœ¨ä¹‹é—´çš„é¸¿æ²Ÿã€‚",
                    "{soundtrack}çš„èŠ‚å¥ä¸ä¸€é¢—è¢«å›°åœ¨ä¸–ç•Œä¹‹é—´çš„å¿ƒåŒæ­¥è·³åŠ¨ã€‚"
                ],
                
                dreams: [
                    "æˆ‘{dream}çš„æ¢¦æƒ³æºäºæˆ‘åˆ†è£‚èº«ä»½çš„ç¢°æ’ã€‚",
                    "æˆ‘æƒ³çŸ¥é“å®ç°{dream}æ˜¯å¦æœ€ç»ˆä¼šè®©æˆ‘æ„Ÿåˆ°å®Œæ•´ã€‚",
                    "é€šå¾€{dream}çš„é“è·¯å› å¤šç§æ–‡åŒ–çš„æœŸæœ›è€Œå˜å¾—å¤æ‚ã€‚",
                    "æˆ‘çš„ç¥–å…ˆä¸ä¼šç†è§£æˆ‘{dream}çš„æ„¿æœ›ï¼Œè¿™æ—¢è§£æ”¾åˆå¯æ€•ã€‚",
                    "æˆ‘è¿½æ±‚{dream}ä½œä¸ºè°ƒå’Œæˆ‘å†…å¿ƒä¸åŒä¸–ç•Œçš„æ–¹å¼ã€‚"
                ],
                
                // GPTç”Ÿæˆçš„å¥å­ï¼ˆä¸­æ–‡ç‰ˆï¼‰
                languageDisplacement: [
                    "æˆ‘å¿˜è®°äº†å¦‚ä½•ç”¨æ¯è¯­å†™æˆ‘çš„åå­—ï¼Œä½†æˆ‘è®°å¾—å½“æœ‰äººå¿µé”™æˆ‘åå­—æ—¶çš„æ„Ÿå—ã€‚",
                    "æˆ‘çš„å£éŸ³æœ‰æ—¶åŒºã€‚",
                    "å½“æˆ‘ç”¨æ™®é€šè¯æ€è€ƒæ—¶ï¼Œæˆ‘å¾ˆå“äº®ã€‚ç”¨è‹±è¯­æ—¶ï¼Œæˆ‘å¾ˆè°¨æ…ã€‚æ— è®ºå“ªç§ï¼Œæˆ‘éƒ½ä¸å®Œå…¨æ˜¯æˆ‘è‡ªå·±ã€‚",
                    "æˆ‘çš„æ¢¦ä»è¯´ç€æˆ‘æ¸…é†’æ—¶ä¸å†ä½¿ç”¨çš„è¯­è¨€ã€‚",
                    "æˆ‘çš„èˆŒå¤´åœ¨è½¬æ¢è¯­è¨€æ—¶ä¼šç»“å·´ã€‚"
                ],
                
                systemicResistance: [
                    "æˆ‘çš„èº«ä»½å¤„äºæµ‹è¯•ç‰ˆã€‚æ¯å¤©æ›´æ–°ã€‚éšæ—¶å¯èƒ½æ”¹å˜ã€‚",
                    "æ¯ä»½è¡¨æ ¼éƒ½è¦æ±‚æˆ‘å¡«å†™æ³•å®šå§“åã€‚ä½†æˆ‘ä»ä¸çŸ¥é“è¯¥ç»™å“ªä¸€ä¸ªã€‚",
                    "æˆ‘æ²¡æœ‰é€‰æ‹©æˆ‘çš„è‹±æ–‡åã€‚å®ƒæ˜¯ä¸ºäº†å¸®åŠ©æˆ‘'èå…¥'è€ŒæŒ‘é€‰çš„ã€‚",
                    "ç­¾è¯é˜Ÿä¼æ•™ä¼šäº†æˆ‘å“ªæœ¬æŠ¤ç…§æ›´é‡è¦ã€‚"
                ],
                
                familialTerms: [
                    "è‹±è¯­ä¸­æ²¡æœ‰ä¸å¥¶å¥¶å¯¹æˆ‘çš„ç§°å‘¼ç›¸å¯¹åº”çš„è¯ã€‚",
                    "å­¦æ ¡é‡Œå«æˆ‘Hanaï¼Œä½†å§‘å§‘å«æˆ‘é˜¿å¨œã€‚æˆ‘ä¸è®°å¾—æˆ‘ç”¨å“ªä¸ªåå­—å“­æ³£ã€‚",
                    "æˆ‘æœ‰ä¸‰ä¸ªåå­—ï¼Œæ¯ä¸ªåå­—éƒ½å±äºä¸åŒç‰ˆæœ¬çš„æˆ‘ã€‚",
                    "æˆ‘çˆ¶æ¯å«æˆ‘ä¸€ä¸ªåå­—ï¼Œæœ‹å‹å«æˆ‘å¦ä¸€ä¸ªã€‚æˆ‘å¯¹ä¸¤è€…éƒ½æœ‰å›åº”ã€‚"
                ],
                
                rootlessness: [
                    "å½“æˆ‘åœæ­¢ç¿»è¯‘ï¼Œæˆ‘å°±åœæ­¢å­˜åœ¨ã€‚",
                    "å®¶çš„å‘³é“æ˜¯å¤§è’œå’ŒèŠéº»æ²¹ã€‚ä½†è¿™é‡Œï¼Œå‘³é“æ˜¯æ´—è¡£ç²‰å’Œå†·ç©ºæ°”ã€‚",
                    "æˆ‘æ¥è‡ªå¤ªå¤šåœ°æ–¹ï¼Œæ— æ³•åªå±äºä¸€å¤„ã€‚",
                    "æˆ‘æ€å¿µä¸€ä¸ªæˆ‘ä¸ç¡®å®šæ˜¯å¦å­˜åœ¨è¿‡çš„åœ°æ–¹ã€‚"
                ],
                
                digitalExistence: [
                    "æˆ‘çš„æ¯è¯­åœ¨ç”µè„‘ä¸Šè¢«çº¢è‰²æ³¢æµªçº¿æ ‡è®°ä¸ºé”™è¯¯ã€‚",
                    "æˆ‘çš„åå­—è¢«è‡ªåŠ¨æ›´æ­£ä¸ºæ›´å®¹æ˜“è®©ä½ è¯»çš„ç‰ˆæœ¬ã€‚",
                    "åœ¨æ¯ä¸ªæ•°æ®åº“é‡Œï¼Œæˆ‘çš„åå­—éƒ½æ˜¯æ‹¼å†™é”™è¯¯ã€‚"
                ]
            };
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªæ•°ç»„ä¸­çš„å…ƒç´ 
            function getRandomElement(array) {
                return array[Math.floor(Math.random() * array.length)];
            }
            
            // åˆ›å»ºè¯­è¨€é€‰æ‹©å™¨
            const languageSelector = document.createElement('select');
            languageSelector.id = 'output-language';
            languageSelector.innerHTML = `
                <option value="original">Original</option>
                <option value="chinese">Chinese</option>
            `;
            
            // æ·»åŠ åˆ°DOM
            const selectorContainer = document.getElementById('language-selector-container');
            selectorContainer.appendChild(languageSelector);
            
            // æ·»åŠ è¯­è¨€åˆ‡æ¢åŠŸèƒ½
            languageSelector.addEventListener('change', function() {
                if (currentText && this.value === 'chinese') {
                    // è·å–åŸºæœ¬æ•°æ®
                    const nameLocal = document.getElementById('name-local').value;
                    const nameForeign = document.getElementById('name-foreign').value;
                    const food = document.getElementById('food').value;
                    const place = document.getElementById('home-place').value;
                    const object = document.getElementById('object').value;
                    const soundtrack = document.getElementById('soundtrack').value;
                    const dream = document.getElementById('aspiration').value;
                    
                    // ç”Ÿæˆéšæœºä¸­æ–‡ç‹¬ç™½
                    let chineseText = '';
                    
                    // æ·»åŠ éšæœºçš„ä¸»è¦èº«ä»½å¥å­
                    if (Math.random() < 0.5) {
                        // ä½¿ç”¨æ–°çš„GPTç”Ÿæˆçš„å¥å­
                        const categories = ['languageDisplacement', 'systemicResistance', 'familialTerms', 'rootlessness', 'digitalExistence'];
                        const randomCategory = categories[Math.floor(Math.random() * categories.length)];
                        chineseText += getRandomElement(chineseSentenceTemplates[randomCategory]) + '\n\n';
                    }
                    
                    // åå­—éƒ¨åˆ†
                    chineseText += getRandomElement(chineseSentenceTemplates.names)
                        .replace('{nameLocal}', nameLocal)
                        .replace('{nameForeign}', nameForeign) + '\n\n';
                    
                    // é£Ÿç‰©éƒ¨åˆ†
                    chineseText += getRandomElement(chineseSentenceTemplates.food)
                        .replace('{food}', food) + '\n\n';
                    
                    // æ·»åŠ åœ°ç‚¹éƒ¨åˆ†ï¼ˆå¦‚æœæœ‰ï¼‰
                    if (place) {
                        chineseText += getRandomElement(chineseSentenceTemplates.place)
                            .replace('{place}', place) + '\n\n';
                    }
                    
                    // æ·»åŠ ç‰©å“éƒ¨åˆ†ï¼ˆå¦‚æœæœ‰ï¼‰
                    if (object) {
                        chineseText += getRandomElement(chineseSentenceTemplates.object)
                            .replace('{object}', object) + '\n\n';
                    }
                    
                    // æ·»åŠ éŸ³ä¹éƒ¨åˆ†ï¼ˆå¦‚æœæœ‰ï¼‰
                    if (soundtrack) {
                        chineseText += getRandomElement(chineseSentenceTemplates.soundtrack)
                            .replace('{soundtrack}', soundtrack) + '\n\n';
                    }
                    
                    // æ·»åŠ æ¢¦æƒ³éƒ¨åˆ†ï¼ˆå¦‚æœæœ‰ï¼‰
                    if (dream) {
                        chineseText += getRandomElement(chineseSentenceTemplates.dreams)
                            .replace('{dream}', dream) + '\n\n';
                    }
                    
                    // æ·»åŠ é¢å¤–çš„éšæœºGPTç”Ÿæˆçš„å¥å­
                    if (Math.random() < 0.7) {
                        const categories = ['languageDisplacement', 'systemicResistance', 'familialTerms', 'rootlessness', 'digitalExistence'];
                        const randomCategory = categories[Math.floor(Math.random() * categories.length)];
                        chineseText += getRandomElement(chineseSentenceTemplates[randomCategory]) + '\n\n';
                    }
                    
                    // æ·»åŠ èº«ä»½è®¤åŒéƒ¨åˆ†
                    chineseText += getRandomElement(chineseSentenceTemplates.identity) + '\n\n';
                    chineseText += getRandomElement(chineseSentenceTemplates.language) + '\n\n';
                    chineseText += getRandomElement(chineseSentenceTemplates.floating) + '\n\n';
                    chineseText += getRandomElement(chineseSentenceTemplates.ending);
                    
                    outputText.innerHTML = chineseText;
                } else {
                    // æ¢å¤åŸæ–‡
                    outputText.innerHTML = currentText;
                }
            });
            
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // æ”¶é›†æ‰€æœ‰æ•°æ®
                const nameLocal = document.getElementById('name-local').value;
                const nameForeign = document.getElementById('name-foreign').value;
                const food = document.getElementById('food').value;
                const place = document.getElementById('home-place').value;
                const object = document.getElementById('object').value;
                const soundtrack = document.getElementById('soundtrack').value;
                const dream = document.getElementById('aspiration').value;
                const belonging = document.getElementById('belonging').value;
                
                // è·å–é€‰ä¸­çš„æ–‡åŒ–èƒŒæ™¯
                const culturalBg = Array.from(document.querySelectorAll('input[name="cultural-bg"]:checked'))
                    .map(checkbox => checkbox.value);
                
                // è·å–é€‰ä¸­çš„è¯­è¨€
                const languages = Array.from(document.querySelectorAll('input[name="language"]:checked'))
                    .map(checkbox => checkbox.value);
                
                // è·å–é€‰ä¸­çš„æ„Ÿå—
                const feeling = document.querySelector('input[name="feeling"]:checked').value;
                
                // ä¿å­˜å½“å‰ç‹¬ç™½æ•°æ®ç”¨äºä¸Šä¼ 
                currentMonologue = {
                    nameLocal,
                    nameForeign,
                    food,
                    place,
                    object,
                    soundtrack,
                    dream,
                    belonging,
                    culturalBg,
                    languages,
                    feeling,
                    text: '',
                    timestamp: new Date().toISOString()
                };
                
                // ç”Ÿæˆéšæœºç‹¬ç™½
                let generatedText = '';
                
                // æ·»åŠ éšæœºçš„ä¸»è¦èº«ä»½å¥å­
                if (Math.random() < 0.5) {
                    // ä½¿ç”¨æ–°çš„GPTç”Ÿæˆçš„å¥å­
                    const categories = ['languageDisplacement', 'systemicResistance', 'familialTerms', 'rootlessness', 'digitalExistence'];
                    const randomCategory = categories[Math.floor(Math.random() * categories.length)];
                    generatedText += getRandomElement(sentenceTemplates[randomCategory]) + '\n\n';
                }
                
                // åå­—éƒ¨åˆ†
                generatedText += getRandomElement(sentenceTemplates.names)
                    .replace('{nameLocal}', nameLocal)
                    .replace('{nameForeign}', nameForeign) + '\n\n';
                
                // é£Ÿç‰©éƒ¨åˆ†
                generatedText += getRandomElement(sentenceTemplates.food)
                    .replace('{food}', food) + '\n\n';
                
                // æ·»åŠ åœ°ç‚¹éƒ¨åˆ†ï¼ˆå¦‚æœæœ‰ï¼‰
                if (place) {
                    generatedText += getRandomElement(sentenceTemplates.place)
                        .replace('{place}', place) + '\n\n';
                }
                
                // æ·»åŠ ç‰©å“éƒ¨åˆ†ï¼ˆå¦‚æœæœ‰ï¼‰
                if (object) {
                    generatedText += getRandomElement(sentenceTemplates.object)
                        .replace('{object}', object) + '\n\n';
                }
                
                // æ·»åŠ éŸ³ä¹éƒ¨åˆ†ï¼ˆå¦‚æœæœ‰ï¼‰
                if (soundtrack) {
                    generatedText += getRandomElement(sentenceTemplates.soundtrack)
                        .replace('{soundtrack}', soundtrack) + '\n\n';
                }
                
                // æ·»åŠ æ¢¦æƒ³éƒ¨åˆ†ï¼ˆå¦‚æœæœ‰ï¼‰
                if (dream) {
                    generatedText += getRandomElement(sentenceTemplates.dreams)
                        .replace('{dream}', dream) + '\n\n';
                }
                
                // æ·»åŠ é¢å¤–çš„éšæœºGPTç”Ÿæˆçš„å¥å­
                if (Math.random() < 0.7) {
                    const categories = ['languageDisplacement', 'systemicResistance', 'familialTerms', 'rootlessness', 'digitalExistence'];
                    const randomCategory = categories[Math.floor(Math.random() * categories.length)];
                    generatedText += getRandomElement(sentenceTemplates[randomCategory]) + '\n\n';
                }
                
                // æ·»åŠ èº«ä»½è®¤åŒéƒ¨åˆ†
                generatedText += getRandomElement(sentenceTemplates.identity) + '\n\n';
                generatedText += getRandomElement(sentenceTemplates.language) + '\n\n';
                generatedText += getRandomElement(sentenceTemplates.floating) + '\n\n';
                generatedText += getRandomElement(sentenceTemplates.ending);
                
                currentText = generatedText;
                currentMonologue.text = currentText;
                
                // æ˜¾ç¤ºç»“æœ
                outputContainer.style.display = 'flex';
                outputContainer.querySelector('.actions').classList.remove('hidden');
                outputText.innerHTML = currentText;
                
                // é‡ç½®è¯­è¨€é€‰æ‹©å™¨
                languageSelector.value = 'original';
            });
            
            // ä¿å­˜å›¾ç‰‡åŠŸèƒ½
            document.getElementById('save-btn').addEventListener('click', function() {
                alert('ä¸‹è½½åŠŸèƒ½å°†åœ¨æœªæ¥ç‰ˆæœ¬ä¸­æä¾›');
            });
            
            // ä¸Šä¼ åˆ°è®°å¿†æ”¶é›†å™¨åŠŸèƒ½
            document.getElementById('upload-btn').addEventListener('click', function() {
                // ä¸Šä¼ å½“å‰ç‹¬ç™½åˆ°æœåŠ¡å™¨æˆ–æœ¬åœ°å­˜å‚¨
                if(!currentMonologue.text) {
                    alert('Please generate a monologue first');
                    return;
                }
                
                // æš‚æ—¶ä½¿ç”¨localStorageå­˜å‚¨æ•°æ®
                let memories = JSON.parse(localStorage.getItem('nowhere-native-memories') || '[]');
                memories.push(currentMonologue);
                localStorage.setItem('nowhere-native-memories', JSON.stringify(memories));
                
                alert('Your monologue has been collected. Check all collected monologues in the "Memory Box".');
                
                // æ‰“å¼€å±•ç¤ºé¡µé¢
                window.open('memories.html', '_blank');
            });
            
            // é‡æ–°ç”ŸæˆåŠŸèƒ½
            document.getElementById('regenerate-btn').addEventListener('click', function() {
                form.dispatchEvent(new Event('submit'));
            });
        });
    </script>
</body>
</html> 